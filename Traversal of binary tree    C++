

#include <iostream>
#include <vector>
#include <algorithm>
#include<map>
using namespace std;


//已知前序和中序求后序
vector<int> pre,in;
vector<int> post;

void postOrder(int prel,int inl,int inr){
	
	if(inl>inr){
		return ;
	}
	int i = inl;
	while(in[i]!=pre[prel]){
		i++;
	}
	postOrder(prel+1,inl,i-1);
	postOrder(prel+1+i-inl,i+1,inr);
	post.push_back(in[i]);
	 
}

int main(){
	int n;
	scanf("%d",&n);
	
	pre.resize(n);
	in.resize(n);
	for(int i = 0;i<n;i++){
		cin>>pre[i];
		
	}  
	for(int i = 0;i<n;i++){
		cin>>in[i];
		
	}
	postOrder(0,0,n-1);
	for(int i = 0;i<post.size() ;i++){
		cout<<post[i]<<" ";
		
	}
	return 0;
}

//已知后序中序转前序
vector<int> pre,in;
vector<int> post;

void preOrder(int root,int inl,int inr){
	
	if(inl>inr){
		return ;
	}

	int i = inl;
	while(i<inr&&in[i]!=post[root]){
		i++;
	}
	pre.push_back(post[root]) ;
	preOrder(root-1-inr+i,inl,i-1);
	preOrder(root-1,i+1,inr);
	
	 
}

int main(){
	int n;
	scanf("%d",&n);
	
	post.resize(n);
	in.resize(n);
	 
	for(int i = 0;i<n;i++){
		cin>>in[i];
	}
	
	for(int i = 0;i<n;i++){
		cin>>post[i];
	} 
	
	preOrder(n-1,0,n-1);
	for(int i = 0;i<pre.size() ;i++){
		cout<<pre[i]<<" ";
	}
	return 0;
}



//后序中序转层序
struct node{
	int index,value;
	
};
bool cmp(node a,node b){
	return a.index <b.index ;
	
}
vector<int> in;
vector<int> post;
vector<node> ans;
 
void preOrder(int root,int inl,int inr,int index){
	
	if(inl>inr){
		return ;
	}

	int i = inl;
	while(i<inr&&in[i]!=post[root]){
		i++;
	}
    ans.push_back({index,post[root]});
	 
	preOrder(root-1-inr+i,inl,i-1,2 * index + 1);
	preOrder(root-1,i+1,inr,2 * index + 2);
	
	 
}

int main(){
	int n;
	scanf("%d",&n);
	
	post.resize(n);
	in.resize(n);
	 
	
	
	for(int i = 0;i<n;i++){
		cin>>post[i];
	} 
	for(int i = 0;i<n;i++){
		cin>>in[i];
	}
	
	preOrder(n-1,0,n-1,0);
	sort(ans.begin() ,ans.end() ,cmp);
	
	for(int i = 0;i<ans.size() ;i++){
		cout<<ans[i].value<<" ";
	}
	return 0;
}

